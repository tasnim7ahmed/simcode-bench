Generate a C++ script for an NS-3 simulation that integrates traffic control, network devices, and application setup. Start by configuring the network topology with nodes, point-to-point devices, and traffic control queues. Use the InternetStackHelper to install the traffic control layer and override the default queue configuration to explicitly configure FqCoDelQueueDiscs and dynamic queue limits on devices. Assign IPv4 addresses to devices using Ipv4AddressHelper and set up global routing tables. Implement PingHelper for sending ICMP echo requests and BulkSendHelper for TCP communication between clients and servers, configuring MaxBytes for TCP and PacketSinkHelpers for each client. Also, install queue disc tracers on the bottleneck device to monitor packet drops, marks, and queue lengths, scheduling RTT, CWND, and throughput traces. Schedule TCP traces for DCTCP if enabled, and ensure PCAP tracing if requested. Set simulation stop time, run the simulation, and close all streams after validation.
