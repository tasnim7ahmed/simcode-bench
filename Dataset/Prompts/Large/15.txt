Write a detailed C++ program using the ns-3 library to simulate the performance of 802.11n MIMO networks. The program should output a plot of throughput versus distance for every HT MCS value, ranging from 1 to 4 MIMO streams. It should allow configuration of parameters such as UDP or TCP traffic, frequency band (2.4 or 5.0 GHz), channel width, short guard interval, and preamble detection. The program must simulate a network with a single station and an access point, where the distance between them is varied. For each MIMO stream and MCS mode, simulate data transfer between the nodes and measure throughput. Use Gnuplot to plot the results, with appropriate axis labels and legends. The simulation should allow the user to configure step size, simulation time, and channel bonding, and use either UDP or TCP traffic. Include code to set up the Wi-Fi channel, PHY, MAC, mobility, and network stack, as well as data flow using UDP or TCP applications, and ensure that throughput is calculated and plotted.
